(function(){var e={1715:function(e,t,s){"use strict";s.r(t)},7382:function(e,t,s){"use strict";s.r(t)},6205:function(e,t,s){"use strict";var a=s(9242),o=s(3396);function r(e,t,s,a,r,i){const n=(0,o.up)("navBar"),l=(0,o.up)("router-view"),c=(0,o.up)("errorMessage");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(n),(0,o.Wm)(l),(0,o.Wm)(c)],64)}var i=s(7139);const n=e=>((0,o.dD)("data-v-e65b52ca"),e=e(),(0,o.Cn)(),e),l={id:"menu"},c=["src"],u={class:"nameOfPage"},d={key:0,class:"backgroundBlock"},m={class:"linkBlock"},h={class:"buttonBlock"},p=n((()=>(0,o._)("div",{class:"downloadApplication"},"Установить веб-приложение",-1)));function g(e,t,a,r,n,g){const f=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",l,[1==r.statusOfAuthorization?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"nav",onClick:t[0]||(t[0]=(...e)=>g.toggleLinkVisibility&&g.toggleLinkVisibility(...e))},[(0,o._)("img",{src:s(4184)("./"+n.navBarIconName)},null,8,c)])):(0,o.kq)("",!0),(0,o._)("div",u,(0,i.zw)(r.nameOfPage),1)]),1==n.linkVisibility?((0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("div",m,[(0,o.Wm)(f,{class:"link",to:"/siteList"},{default:(0,o.w5)((()=>[(0,o.Uk)("Анализируемые сайты")])),_:1}),(0,o.Wm)(f,{class:"link",to:"/profile"},{default:(0,o.w5)((()=>[(0,o.Uk)("Профиль")])),_:1})]),(0,o._)("div",h,[p,1==r.statusOfAuthorization?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"logOut",onClick:t[1]||(t[1]=(...e)=>g.logOut&&g.logOut(...e))},"Выйти")):(0,o.kq)("",!0)])])):(0,o.kq)("",!0)],64)}var f=s(1020);const v={class:"page"};function w(e,t,s,a,r,i){const n=(0,o.up)("choosingStatuses"),l=(0,o.up)("authorizationBlock"),c=(0,o.up)("registrationBlock");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o.Wm)(n,{class:"choosingStatuses"}),"authorization"==a.authorizationSelectedBlock?((0,o.wg)(),(0,o.j4)(l,{key:0})):(0,o.kq)("",!0),"registration"==a.authorizationSelectedBlock?((0,o.wg)(),(0,o.j4)(c,{key:1})):(0,o.kq)("",!0)])}s(2801);var k=s(251);let y="";y=window.location.origin+"/api/";let b={baseURL:y,timeout:1500,headers:{"Content-Type":"application/json; charset=utf-8"}};function B(){let e=k.create(b);return e.interceptors.response.use((async e=>e),(async e=>{console.log(e.toJSON());let t={};if("ERR_NETWORK"==e.code||"ECONNABORTED"==e.code||"Network Error"==e.message||"Request failed with status code 404"==e.message)return t.data={errorExist:!0,actionMessage:"serverIsNotAvailable"},It().setErrorMessageText("Ошибка соединения с сервером. Попробуйте позже."),t})),e}let q=B();function E(e){b.headers.Authorization=`Bearer ${e}`,q=B()}const O=(0,f.Q_)("autorization",{state:()=>({email:"",password:"",authorizationToken:"",statusOfAuthorization:!1,authorizationSelectedBlock:"authorization"}),actions:{setAutorizationData(e,t){this.email=e,this.password=t},setAuthorizationSelectedBlock(e){this.authorizationSelectedBlock=e},setRoleSelectedBlock(e){this.role=e},async logOut(){this.statusOfAuthorization=!1,this.authorizationToken="",E("")},logIn(e){this.statusOfAuthorization=!0,this.authorizationToken=e;JSON.parse(atob(e.split(".")[1]));E(e)},checkAuthorizationToken(){},setProfileCanBeChanged(e){this.profileCanBeChanged=e},setNameOfPage(e){this.nameOfPage=e}}}),_={class:"selectStatus"};function C(e,t,s,a,r,n){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",_,[(0,o._)("p",{onClick:t[0]||(t[0]=e=>n.changeAuthorizationSelectedBlock("authorization")),class:(0,i.C_)({selectedStatus:"authorization"==a.authorizationSelectedBlock})},"Вход",2),(0,o._)("p",{onClick:t[1]||(t[1]=e=>n.changeAuthorizationSelectedBlock("registration")),class:(0,i.C_)({selectedStatus:"registration"==a.authorizationSelectedBlock})},"Регистрация",2)])])}var D={setup(){const e=O(),t=e.setAuthorizationSelectedBlock,s=e.setRoleSelectedBlock,a=(0,o.Fl)((()=>e.role)),r=(0,o.Fl)((()=>e.authorizationSelectedBlock));return{setAuthorizationSelectedBlock:t,setRoleSelectedBlock:s,role:a,authorizationSelectedBlock:r}},methods:{changeAuthorizationSelectedBlock(e){this.setAuthorizationSelectedBlock(e)},changeRoleSelectedBlock(e){this.setRoleSelectedBlock(e)}}},I=s(89);const M=(0,I.Z)(D,[["render",C],["__scopeId","data-v-10dd88a9"]]);var N=M;const z={class:"authorizationBlock"},x={key:0,class:"errorBlock"};function L(e,t,s,r,n,l){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",z,[(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]]),(0,o.wy)((0,o._)("input",{class:"specialInput",type:"password",placeholder:"Пароль","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e)},null,512),[[a.nr,n.password]]),(0,o._)("button",{class:"specialButton",onClick:t[2]||(t[2]=(...e)=>l.requestToAuthorization&&l.requestToAuthorization(...e))},"Войти"),(0,o.Wm)(c,{to:"/autorization/getAuthorizationLink",class:"specialButton linkEnterButton"},{default:(0,o.w5)((()=>[(0,o.Uk)("Войти по ссылке")])),_:1}),(0,o.Wm)(c,{to:"/autorization/recoverPassword",class:"specialButton recoverPassword"},{default:(0,o.w5)((()=>[(0,o.Uk)("Восстановить пароль")])),_:1}),""!=n.errorMessage?((0,o.wg)(),(0,o.iD)("div",x,(0,i.zw)(n.errorMessage),1)):(0,o.kq)("",!0)])}s(7658);const S={class:"page"},T={class:"inputContent"},P={key:0,class:"message"};function j(e,t,s,a,r,n){const l=(0,o.up)("contentBlock");return(0,o.wg)(),(0,o.iD)("div",S,[(0,o._)("div",T,[(0,o.Wm)(l,{name:"Имя",modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.name=e),disabled:!r.profileCanBeChanged},null,8,["modelValue","disabled"])]),(0,o._)("div",{class:"actionButton getCode",onClick:t[1]||(t[1]=(...e)=>n.TelegramAuthorization&&n.TelegramAuthorization(...e))},"Получить токен ТГ-бота"),(0,o._)("div",{class:"actionButton workWithChanges",onClick:t[2]||(t[2]=(...e)=>n.workWithChanges&&n.workWithChanges(...e))},(0,i.zw)(n.changeButtonText),1),r.messageText.length>0?((0,o.wg)(),(0,o.iD)("div",P,(0,i.zw)(r.messageText),1)):(0,o.kq)("",!0)])}const V={class:"contentBlock"},A={class:"nameOfBlock"},R=["disabled","value"],$=["value","disabled"];function W(e,t,s,a,r,n){return(0,o.wg)(),(0,o.iD)("div",V,[(0,o._)("div",A,(0,i.zw)(s.name),1),0==s.textarea?((0,o.wg)(),(0,o.iD)("input",{key:0,disabled:s.disabled,value:s.modelValue,onInput:t[0]||(t[0]=(...e)=>n.changeValue&&n.changeValue(...e)),class:(0,i.C_)(["dataOfBlock",{fieldCanBeChanged:!s.disabled}])},null,42,R)):1==s.textarea?((0,o.wg)(),(0,o.iD)("textarea",{key:1,class:(0,i.C_)(["dataOfBlock",{fieldCanBeChanged:!s.disabled}]),value:s.modelValue,onInput:t[1]||(t[1]=(...e)=>n.changeValue&&n.changeValue(...e)),disabled:s.disabled},null,42,$)):(0,o.kq)("",!0)])}var U={props:{name:String,modelValue:String,disabled:Boolean,textarea:Boolean},methods:{changeValue(e){this.$emit("update:modelValue",e.target.value)}}};const F=(0,I.Z)(U,[["render",W],["__scopeId","data-v-3235dc7c"]]);var Z=F;async function K(e){let t=await q.put("users/updateMainData",{...e});console.log(t),"mainDataOfUserWasUpdated"==t.data.actionMessage&&localStorage.setItem("mainDataOfUser",JSON.stringify(e))}async function H(){let e=await q.get("users/getTelegramAuthorizationToken");return console.log(e),e}var Y={setup(){let{name:e}=(0,f.Jk)(It());return{name:e}},data(){return{profileCanBeChanged:!1,messageText:""}},computed:{changeButtonText(){return 1==this.profileCanBeChanged?"Сохранить изменения":0==this.profileCanBeChanged?"Измененить данные":void 0}},methods:{workWithChanges(){1==this.profileCanBeChanged?this.saveChanges():0==this.profileCanBeChanged&&this.addChanges()},addChanges(){this.profileCanBeChanged=!0},saveChanges(){let e={name:this.name};K(e),this.profileCanBeChanged=!1},async TelegramAuthorization(){let e=await H();"TelegramAuthorizationTokenWasSent"==e.data.actionMessage&&(this.messageText="На вашу почту отправлен токен авторизации ТГ",setTimeout((()=>{this.messageText=""}),1500))}},components:{contentBlock:Z}};const J=(0,I.Z)(Y,[["render",j],["__scopeId","data-v-08366bfc"]]);var Q=J;const G=[{path:"/profile",meta:{nameOfPage:"Профиль",requiredAuthStatus:!0},component:Q,name:"profile"}];async function X(){const e=It().setMainDataOfUser;let t;if(t=await q.get("users/getMainData"),console.log(t),0==t.data.errorExist){let s=t.data.content.mainDataOfUser;localStorage.setItem("mainDataOfUser",JSON.stringify(s)),e(s)}}var ee={routes:G},te=s(2483);const se=[{path:"/",redirect:e=>{console.log("Перенаправление");let t=It(),s=(0,o.Fl)((()=>t.statusOfAuthorization)).value;return 1==s?{path:"/siteList"}:0==s?{path:"/autorization"}:void 0}}],ae=(0,te.p7)({history:(0,te.PO)("/"),routes:se});ae.beforeEach(((e,t)=>{if(0===e.matched.length)return{path:"/",replace:!0};let s=It(),a=(0,o.Fl)((()=>s.statusOfAuthorization)).value,r=e.meta.requiredAuthStatus,i=()=>null!=t.name?{name:t.name,replace:!0}:{path:"/",replace:!0};return null==r?(console.log("Доступ всегда"),!0):0==r&&0==a?(console.log("Доступ только неавторизованным пользователям"),!0):1==a&&1==r?(console.log("Доступ только с авторизацией"),!0):i()}));var oe=ae;async function re(e,t){const s=O(),a=s.logIn;try{let s=await Ct(e,t);if(console.log(s),0==s.data.errorExist&&"tokenWasCreated"==s.data.actionMessage){let e=s.data.content.token;localStorage.setItem("statusOfAuthorization","true"),localStorage.setItem("authorizationToken",e),a(e),oe.push("/"),X()}return s}catch(o){if(console.log(o),"ERR_NETWORK"==o.code)return{errorExist:!0,actionMessage:"serverIsNotAvailable"}}}var ie={data(){return{email:"",password:"",errorMessage:""}},watch:{email(){this.errorMessage=""},password(){this.errorMessage=""}},methods:{async requestToAuthorization(){if(this.email.length<1)this.errorMessage="Введите email";else if(this.password.length<8)this.errorMessage="Пароль слишком короткий";else if(this.password.length<1)this.errorMessage="Введите пароль";else{let e=await re(this.email,this.password);1==e.data.errorExist&&("invalidPassword"==e.data.actionMessage?this.errorMessage="Неверный пароль":"userIsNotExist"==e.data.actionMessage&&(this.errorMessage="Пользователь не найден"))}}}};const ne=(0,I.Z)(ie,[["render",L],["__scopeId","data-v-6ebc3e22"]]);var le=ne;const ce={class:"registrationBlock"},ue={key:0,class:"errorBlock"};function de(e,t,s,r,n,l){return(0,o.wg)(),(0,o.iD)("div",ce,[(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]]),(0,o.wy)((0,o._)("input",{class:"specialInput",type:"password",placeholder:"Пароль","onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),autocomplete:"new-password"},null,512),[[a.nr,n.password]]),(0,o.wy)((0,o._)("input",{class:"specialInput",type:"password",placeholder:"Повторите пароль","onUpdate:modelValue":t[2]||(t[2]=e=>n.repeatPassword=e),autocomplete:"new-password"},null,512),[[a.nr,n.repeatPassword]]),(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Имя","onUpdate:modelValue":t[3]||(t[3]=e=>n.name=e)},null,512),[[a.nr,n.name]]),(0,o._)("button",{class:"specialButton",onClick:t[4]||(t[4]=(...e)=>l.requestToRegistration&&l.requestToRegistration(...e))},"Зарегистрироваться"),""!=n.errorMessage?((0,o.wg)(),(0,o.iD)("div",ue,(0,i.zw)(n.errorMessage),1)):(0,o.kq)("",!0)])}async function me(e){let t=O().setAutorizationData,s=await q.post("users/register",{...e});return console.log(s),0==s.data.errorExist&&"checkEmail"==s.data.actionMessage&&(t(e.email,e.password),oe.push({path:"autorization/needForConfirmationEmail"})),s}var he={data(){return{email:"",password:"",repeatPassword:"",name:"",errorMessage:""}},watch:{email(){this.errorMessage=""},password(){this.errorMessage=""},repeatPassword(){this.errorMessage=""},name(){this.errorMessage=""}},methods:{async requestToRegistration(){if(this.email.length<1)this.errorMessage="Введите email";else if(this.password.length<1)this.errorMessage="Введите пароль";else if(this.name.length<1)this.errorMessage="Введите имя";else if(this.password!=this.repeatPassword)this.errorMessage="Пароли не совпадают";else{let e=await me({email:this.email,password:this.password,name:this.name});console.log(e),1==e.data.errorExist&&("invalidEmail"==e.data.actionMessage?this.errorMessage="Некорректный Email":"userHasBeenAlreadyRegistered"==e.data.actionMessage&&(this.errorMessage="Email уже был использован для регистрации"))}}}};const pe=(0,I.Z)(he,[["render",de],["__scopeId","data-v-4c9a7e75"]]);var ge=pe,fe={components:{choosingStatuses:N,authorizationBlock:le,registrationBlock:ge},setup(){const e=(0,o.Fl)((()=>O().authorizationSelectedBlock));return{authorizationSelectedBlock:e}}};const ve=(0,I.Z)(fe,[["render",w],["__scopeId","data-v-72d3696e"]]);var we=ve;const ke={class:"page"},ye={key:0,class:"successfulRegistration"},be={key:1,class:"errorBlock"};function Be(e,t,s,a,r,n){const l=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",ke,[""!=r.successfulText?((0,o.wg)(),(0,o.iD)("div",ye,(0,i.zw)(r.successfulText),1)):(0,o.kq)("",!0),""!=r.errorMessage?((0,o.wg)(),(0,o.iD)("div",be,(0,i.zw)(r.errorMessage),1)):(0,o.kq)("",!0),(0,o.Wm)(l,{to:"/autorization",class:"specialButton goToEnter"},{default:(0,o.w5)((()=>[(0,o.Uk)("Перейти на страницу входа")])),_:1})])}async function qe(e){let{confirmationToken:t}=e,s=await q.post("users/confirmRegistration",{confirmationToken:t});return console.log(s),s}var Ee={data(){return{successfulText:"",confirmationToken:"",errorMessage:"",error:!1}},created(){this.confirmationToken=String(this.$route.query.confirmationToken),this.sendConfirmationToken()},methods:{async sendConfirmationToken(){let e=await qe({confirmationToken:this.confirmationToken});console.log(e),1==e.data.errorExist?"registrationOfUserHasBeenConfirmed"==e.data.actionMessage?this.errorMessage="Пользователь уже зарегистрирован":"invalidConfirmationToken"==e.data.actionMessage?this.errorMessage="Неверный токен подтверждения":"userIsNotExist"==e.data.actionMessage?this.errorMessage="Пользователя не существует":"serverIsNotAvailable"==e.data.actionMessage&&(this.errorMessage="Нет доступа к серверу, попробуйте позже"):this.successfulText="Аккаунт подтвержден!"}}};const Oe=(0,I.Z)(Ee,[["render",Be],["__scopeId","data-v-f2d79f64"]]);var _e=Oe;const Ce={class:"page"},De={key:0,class:"errorBlock"};function Ie(e,t,s,r,n,l){return(0,o.wg)(),(0,o.iD)("div",Ce,[(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]]),(0,o._)("div",{class:"specialButton getCode",onClick:t[1]||(t[1]=(...e)=>l.getCode&&l.getCode(...e))},"Сбросить пароль"),""!=n.errorMessage?((0,o.wg)(),(0,o.iD)("div",De,(0,i.zw)(n.errorMessage),1)):(0,o.kq)("",!0)])}async function Me(e){O().setAutorizationData;let t=await q.post("users/recoverPassword",{email:e});return 0==t.data.errorExist&&"checkEmail"==t.data.actionMessage&&oe.push({path:"/autorization/needForChangePassword"}),t}var Ne={data(){return{email:"",errorMessage:""}},watch:{email(){this.errorMessage=""}},methods:{async getCode(){if(this.email.length<1)this.errorMessage="Введите email";else{let e=await Me(this.email);1==e.data.errorExist&&("invalidEmail"==e.data.actionMessage?this.errorMessage="Некорректный Email":"userIsNotExist"==e.data.actionMessage&&(this.errorMessage="Пользователь не найден"))}}}};const ze=(0,I.Z)(Ne,[["render",Ie],["__scopeId","data-v-4f654ca6"]]);var xe=ze;const Le={class:"page"},Se={key:0,class:"errorBlock"};function Te(e,t,s,r,n,l){return(0,o.wg)(),(0,o.iD)("div",Le,[(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Новый пароль","onUpdate:modelValue":t[0]||(t[0]=e=>n.newPassword=e)},null,512),[[a.nr,n.newPassword]]),(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Новый пароль еще раз","onUpdate:modelValue":t[1]||(t[1]=e=>n.newPasswordSecond=e)},null,512),[[a.nr,n.newPasswordSecond]]),(0,o._)("div",{class:"createNewPassword",onClick:t[2]||(t[2]=(...e)=>l.createNewPassword&&l.createNewPassword(...e))},"Установить новый пароль"),""!=n.errorMessage?((0,o.wg)(),(0,o.iD)("div",Se,(0,i.zw)(n.errorMessage),1)):(0,o.kq)("",!0)])}async function Pe(e){let t=await q.post("users/createNewPassword",{...e});return console.log(t),0==t.data.errorExist&&"passwordWasUpdated"==t.data.actionMessage&&oe.replace({path:"/autorization"}),t}var je={setup(){const e=O();return{autorizationStore:e}},data(){return{newPassword:"",newPasswordSecond:"",changePasswordConfirmationToken:"",errorMessage:""}},created(){this.changePasswordConfirmationToken=this.$route.query.changePasswordConfirmationToken,console.log(this.changePasswordConfirmationToken)},watch:{newPassword(){this.errorMessage=""},newPasswordSecond(){this.errorMessage=""}},methods:{async createNewPassword(){if(this.newPassword.length<1)this.errorMessage="Введите пароль";else if(this.newPasswordSecond.length<1)this.errorMessage="Введите пароль еще раз";else if(this.newPassword!=this.newPasswordSecond)this.errorMessage="Пароли должны совпадать";else{let e=await Pe({newPassword:this.newPassword,changePasswordConfirmationToken:this.changePasswordConfirmationToken});1==e.data.errorExist&&("invalidEmail"==e.data.actionMessage?this.errorMessage="Некорректный Email":"userIsNotExist"==e.data.actionMessage?this.errorMessage="Пользователь не найден":"invalidConfirmationCode"==e.data.actionMessage?this.errorMessage="Неверный код подтверждения":"serverIsNotAvailable"==e.data.actionMessage&&(this.errorMessage="Нет доступа к серверу"))}}}};const Ve=(0,I.Z)(je,[["render",Te],["__scopeId","data-v-cdc6434c"]]);var Ae=Ve;const Re=e=>((0,o.dD)("data-v-00ac14fc"),e=e(),(0,o.Cn)(),e),$e={class:"page"},We=Re((()=>(0,o._)("div",{class:"needForConfirmationEmail"},"Для подтверждения аккаунта перейдите по ссылке из письма, которое было отправлено на указаный вами Email",-1))),Ue=[We];function Fe(e,t,s,a,r,i){return(0,o.wg)(),(0,o.iD)("div",$e,Ue)}var Ze={};const Ke=(0,I.Z)(Ze,[["render",Fe],["__scopeId","data-v-00ac14fc"]]);var He=Ke;const Ye={class:"page"},Je={key:0,class:"errorBlock"};function Qe(e,t,s,r,n,l){return(0,o.wg)(),(0,o.iD)("div",Ye,[(0,o.wy)((0,o._)("input",{class:"specialInput",type:"text",placeholder:"Email","onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e)},null,512),[[a.nr,n.email]]),(0,o._)("div",{class:"specialButton getCode",onClick:t[1]||(t[1]=(...e)=>l.getCode&&l.getCode(...e))},"Получить токен входа"),""!=n.errorMessage?((0,o.wg)(),(0,o.iD)("div",Je,(0,i.zw)(n.errorMessage),1)):(0,o.kq)("",!0)])}async function Ge(e){let t=await q.get("users/getAuthorizationLink",{params:{email:e}});return console.log(t),t}var Xe={data(){return{email:"",errorMessage:""}},watch:{email(){this.errorMessage=""}},methods:{async getCode(){if(this.email.length<1)this.errorMessage="Введите email";else{let e=await Ge(this.email);1==e.data.errorExist?"invalidEmail"==e.data.actionMessage?this.errorMessage="Некорректный Email":"userIsNotExist"==e.data.actionMessage&&(this.errorMessage="Пользователь не найден"):"checkEmail"==e.data.actionMessage&&this.$router.replace({path:"/autorization/goToEmailToLogIn"})}}}};const et=(0,I.Z)(Xe,[["render",Qe],["__scopeId","data-v-20190d7a"]]);var tt=et;const st=e=>((0,o.dD)("data-v-2f2b82c8"),e=e(),(0,o.Cn)(),e),at={class:"page"},ot=st((()=>(0,o._)("div",{class:"goToEmailToLogIn"},"Для входа перейдите по ссылке из письма, которое было отправлено на ваш Email",-1))),rt=[ot];function it(e,t,s,a,r,i){return(0,o.wg)(),(0,o.iD)("div",at,rt)}var nt={};const lt=(0,I.Z)(nt,[["render",it],["__scopeId","data-v-2f2b82c8"]]);var ct=lt;const ut={class:"page"},dt={key:0,class:"goToEmailToLogIn"},mt={key:1,class:"errorBlock"};function ht(e,t,s,a,r,n){return(0,o.wg)(),(0,o.iD)("div",ut,[""==r.errorMessage?((0,o.wg)(),(0,o.iD)("div",dt,"Идет переход в ваш аккаунт...")):(0,o.kq)("",!0),""!=r.errorMessage?((0,o.wg)(),(0,o.iD)("div",mt,(0,i.zw)(r.errorMessage),1)):(0,o.kq)("",!0)])}async function pt(e){let t=await q.get("users/logInByLink",{params:{loginConfirmationToken:e}});return console.log(t),t}var gt={setup(){const e=O(),t=e.logIn;return{logIn:t}},data(){return{errorMessage:""}},created(){let e=this.$route.query.loginConfirmationToken;pt(e).then((e=>{if(1==e.data.errorExist)"invalidLoginConfirmationToken"==e.data.actionMessage?this.errorMessage="Неверный или устаревший токен подтверждения входа":"userIsNotExist"==e.data.actionMessage?this.errorMessage="Пользователь не найден":"invalidConfirmationToken"==e.data.actionMessage&&(this.errorMessage="Невалидный токен подтверждения входа");else if("tokenWasCreated"==e.data.actionMessage){let t=e.data.content.token;localStorage.setItem("statusOfAuthorization","true"),localStorage.setItem("authorizationToken",t),this.logIn(t),this.$router.replace({path:"/"}),X()}}))}};const ft=(0,I.Z)(gt,[["render",ht],["__scopeId","data-v-9b2092ea"]]);var vt=ft;const wt=e=>((0,o.dD)("data-v-72386bc3"),e=e(),(0,o.Cn)(),e),kt={class:"page"},yt=wt((()=>(0,o._)("div",{class:"needForConfirmationEmail"},"Для смены пароля перейдите по ссылке из письма, которое было отправлено на ваш Email",-1))),bt=[yt];function Bt(e,t,s,a,r,i){return(0,o.wg)(),(0,o.iD)("div",kt,bt)}var qt={};const Et=(0,I.Z)(qt,[["render",Bt],["__scopeId","data-v-72386bc3"]]);var Ot=Et;const _t=[{path:"/autorization",meta:{requiredAuthStatus:!1},children:[{path:"",component:we,name:"autorization"},{path:"recoverPassword",component:xe},{path:"confirmRegistration",component:_e},{path:"createNewPassword",component:Ae},{path:"needForConfirmationEmail",component:He},{path:"needForChangePassword",component:Ot},{path:"getAuthorizationLink",component:tt},{path:"goToEmailToLogIn",component:ct},{path:"logInByLink",component:vt}]}];async function Ct(e,t){let s=await q.get("users/getAuthorizationToken",{params:{email:e,password:t}});return console.log(s),s}var Dt={routes:_t,useAutorizationStore:O};const It=(0,f.Q_)("mainData",{state:()=>({statusOfAuthorization:!1,name:"",errorMessageText:"",nameOfPage:"",analyzedSites:[{name:"Avito",requestCharacteristics:[{name:"description",description:"Описание сути запроса"},{name:"linkWithData",description:"Приоритетная ссылка для поиска",canBeEmpty:!0},{name:"requestText",description:"Текст запроса"},{name:"minimumObjectPrice",type:"Number",description:"Минимальная цена"},{name:"maximumObjectPrice",type:"Number",description:"Максимальная цена"},{name:"differenceFromCurrentDay",type:"Number",description:"За сколько дней назад относительно текущей даты учитывать товары"}]},{name:"FunPay",requestCharacteristics:[{name:"description",description:"Описание сути запроса"},{name:"href",description:"Ссылка на саму HTML-страницу с товарами"},{name:"maximumObjectPrice",type:"Number",description:"Максимальная цена объекта"}]}]}),getters:{statusOfAuthorization(){const e=O();return e.statusOfAuthorization},authorizationToken(){const e=O();return e.authorizationToken}},actions:{setMainDataOfUser(e){this.name=e.name},setProfileCanBeChanged(e){this.profileCanBeChanged=e},setNameOfPage(e){this.nameOfPage=e},setErrorMessageText(e){this.errorMessageText=e}}});async function Mt(){localStorage.setItem("statusOfAuthorization","false"),localStorage.setItem("authorizationToken",""),localStorage.setItem("mainDataOfUser","");const e=O().logOut;e(),oe.replace("/")}var Nt={setup(){const e=It();let{statusOfAuthorization:t,nameOfPage:s}=(0,f.Jk)(e),a=e.setNameOfPage;return{statusOfAuthorization:t,nameOfPage:s,setNameOfPage:a}},data(){return{linkVisibility:!1,storedNameOfPage:"",navBarIconName:"menuBar.svg"}},created(){this.$router.afterEach(((e,t)=>{this.setNameOfPage(this.$route.meta.nameOfPage),this.setLinkVisibility(!1),this.navBarIconName="menuBar.svg"}))},methods:{setLinkVisibility(e){this.linkVisibility=e},toggleLinkVisibility(){1==this.linkVisibility?(this.setLinkVisibility(!1),this.setNameOfPage(this.storedNameOfPage),this.navBarIconName="menuBar.svg"):0==this.linkVisibility&&(this.storedNameOfPage=this.nameOfPage,this.setLinkVisibility(!0),this.navBarIconName="backArrow.svg",this.setNameOfPage("Главное меню"))},logOut(){Mt()}}};const zt=(0,I.Z)(Nt,[["render",g],["__scopeId","data-v-e65b52ca"]]);var xt=zt;const Lt={key:0,class:"errorMessage"};function St(e,t,s,a,r,n){return a.errorMessageText.length>0?((0,o.wg)(),(0,o.iD)("div",Lt,(0,i.zw)(a.errorMessageText),1)):(0,o.kq)("",!0)}var Tt={setup(){let e=It(),t=e.setErrorMessageText,{errorMessageText:s}=(0,f.Jk)(It());return{errorMessageText:s,setErrorMessageText:t}},watch:{errorMessageText(){this.errorMessageText.length>0&&setTimeout((()=>{this.setErrorMessageText("")}),3e3)}}};const Pt=(0,I.Z)(Tt,[["render",St],["__scopeId","data-v-1ad8e9b0"]]);var jt=Pt;async function Vt(){const e=It(),t=O(),s=e.setMainDataOfUser,a=t.logIn,o=localStorage.getItem("statusOfAuthorization"),r=localStorage.getItem("authorizationToken");if("true"!=o&&(localStorage.setItem("statusOfAuthorization","false"),localStorage.setItem("authorizationToken","")),null==r&&(localStorage.setItem("statusOfAuthorization","false"),localStorage.setItem("authorizationToken","")),"true"==o&&""!=r){let e;a(r);try{e=JSON.parse(localStorage.getItem("mainDataOfUser")),s(e)}catch(i){}X()}}var At={components:{navBar:xt,errorMessage:jt}};const Rt=(0,I.Z)(At,[["render",r],["__scopeId","data-v-482d9d2c"]]);var $t=Rt,Wt=s(7199);const Ut={class:"page"};function Ft(e,t,s,a,r,i){const n=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",Ut,[(0,o.Wm)(n,{class:"link",to:"/siteList/FunPay/requestsList"},{default:(0,o.w5)((()=>[(0,o.Uk)("FunPay")])),_:1}),(0,o.Wm)(n,{class:"link",to:"/siteList/Avito/requestsList/"},{default:(0,o.w5)((()=>[(0,o.Uk)("Avito")])),_:1})])}var Zt={};const Kt=(0,I.Z)(Zt,[["render",Ft],["__scopeId","data-v-797adc96"]]);var Ht=Kt;const Yt={class:"page"},Jt={key:0,class:"informationText"},Qt={key:1};function Gt(e,t,s,a,r,i){const n=(0,o.up)("router-link"),l=(0,o.up)("requestBlock");return(0,o.wg)(),(0,o.iD)("div",Yt,[(0,o.Wm)(n,{class:"specialButton siteListButton",to:"/siteList/"},{default:(0,o.w5)((()=>[(0,o.Uk)("Обратно к списку сайтов")])),_:1}),(0,o.Wm)(n,{class:"specialButton newRequestButton",to:"/siteList/"+this.$route.params.siteName+"/createRequest"},{default:(0,o.w5)((()=>[(0,o.Uk)("Создать поисковый запрос")])),_:1},8,["to"]),0==a.requestsList.length?((0,o.wg)(),(0,o.iD)("div",Jt,"Поисковых запросов нет")):((0,o.wg)(),(0,o.iD)("div",Qt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(a.requestsList,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{key:e.id,onUpdateRequest:i.updateRequest,onDeleteRequest:i.deleteRequestByIndex,onShowProductList:i.showProductList,description:e.description,maximumObjectPrice:e.maximumObjectPrice,index:t},null,8,["onUpdateRequest","onDeleteRequest","onShowProductList","description","maximumObjectPrice","index"])))),128))]))])}const Xt={class:"requestBlock"},es={class:"descriptionOfBlock"},ts={class:"descriptionOfBlock"};function ss(e,t,s,a,r,n){return(0,o.wg)(),(0,o.iD)("div",Xt,[(0,o._)("div",es,"Описание запроса: "+(0,i.zw)(s.description),1),(0,o._)("div",ts,"Максимальная цена объектов: "+(0,i.zw)(s.maximumObjectPrice)+" р",1),(0,o._)("div",{class:"ActionButton",onClick:t[0]||(t[0]=(...e)=>n.showProductList&&n.showProductList(...e))},"Показать список товаров"),(0,o._)("div",{class:"ActionButton",onClick:t[1]||(t[1]=(...e)=>n.updateRequest&&n.updateRequest(...e))},"Изменить запрос")])}var as={data(){return{}},props:{description:String,index:Number,maximumObjectPrice:Number},methods:{showProductList(){this.$emit("showProductList",this.index)},updateRequest(){this.$emit("updateRequest",this.index)},deleteRequest(){this.$emit("deleteRequest",this.index)}}};const os=(0,I.Z)(as,[["render",ss],["__scopeId","data-v-ef696486"]]);var rs=os;const is=(0,f.Q_)("requests",{state:()=>({requestsList:[],siteName:""}),actions:{setRequestsList(e){this.requestsList=e},addRequest(e){this.requestsList.unshift(e)},updateRequest(e){this.requestsList=this.requestsList.map((t=>t.id==e.id?{...e}:{...t}))},deleteRequest(e){this.requestsList=this.requestsList.filter((t=>t.id!=e))},setSiteName(e){this.siteName=e}}});async function ns(e){const t=is().setRequestsList;let s=await q.get(`${e}Requests/getAll`);if(console.log(s),0==s.data.errorExist){let e=s.data.content.listOfObjects;t(e)}return s}async function ls(e,t){const s=is().deleteRequest;let a=await q.delete(`${e}Requests/${t}`);return console.log(a),0==a.data.errorExist&&s(t),a}var cs={beforeRouteEnter(e,t){const s=It(),a=(0,o.Fl)((()=>s.analyzedSites));-1==a.value.findIndex((t=>t.name==e.params.siteName))&&oe.push({path:"/",repalce:!0})},setup(){const e=It(),t=is();let s=e.setNameOfPage,a=oe.currentRoute.value,r=(0,o.Fl)((()=>a.params.siteName));s("Запросы на сайте "+a.params.siteName);const i=(0,o.Fl)((()=>t.requestsList));return{requestsStore:t,requestsList:i,siteName:r}},data(){return{}},created(){this.updateRequestsList()},methods:{showProductList(e){let t=this.requestsList[e].id;this.$router.push({path:`/siteList/${this.siteName}/${t}/objectsList/`,replace:!0})},updateRequest(e){let t=this.$route.params.siteName,s=this.requestsList[e].id;oe.push({path:`/siteList/${t}/updateRequest/${s}`})},deleteRequestByIndex(e){ls(this.$route.params.siteName,this.requestsList[e].id)},async updateRequestsList(){(0==this.requestsStore.siteName.length||this.requestsStore.siteName.length>0&&this.$route.params.siteName!=this.requestsStore.siteName)&&(this.requestsStore.setRequestsList([]),this.requestsStore.setSiteName(this.$route.params.siteName),await ns(this.$route.params.siteName))}},components:{requestBlock:rs}};const us=(0,I.Z)(cs,[["render",Gt],["__scopeId","data-v-09599408"]]);var ds=us;const ms={class:"page"};function hs(e,t,s,a,r,i){const n=(0,o.up)("router-link"),l=(0,o.up)("contentBlock");return(0,o.wg)(),(0,o.iD)("div",ms,[(0,o.Wm)(n,{class:"specialButton siteListButton",to:"/siteList/"+this.$route.params.siteName+"/requestsList"},{default:(0,o.w5)((()=>[(0,o.Uk)("Обратно к списку запросов")])),_:1},8,["to"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.requestCharacteristics,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{description:e.description,type:e.type,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,index:t,emptyError:e.emptyError,onRemoveEmptyError:e=>i.removeEmptyError(t,"requestCharacteristics")},null,8,["description","type","modelValue","onUpdate:modelValue","index","emptyError","onRemoveEmptyError"])))),256)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.keyWordsArray,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{description:"Ключевое словосочетание № "+(t+1),canBeDeleted:!0,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,index:t,onDeleteBlock:i.deleteKeyWordBlock,emptyError:e.emptyError,onRemoveEmptyError:e=>i.removeEmptyError(t,"keyWordsArray")},null,8,["description","modelValue","onUpdate:modelValue","index","onDeleteBlock","emptyError","onRemoveEmptyError"])))),256)),(0,o._)("div",{class:"actionButton",onClick:t[0]||(t[0]=(...e)=>i.addKeyWord&&i.addKeyWord(...e))},"Добавить ключевое словосочетание"),(0,o._)("div",{class:"actionButton",onClick:t[1]||(t[1]=(...e)=>i.addRequest&&i.addRequest(...e))},"Создать поисковый запрос")])}const ps={class:"contentBlock"},gs={class:"nameOfBlock"},fs=["disabled"],vs=["disabled"];function ws(e,t,s,r,n,l){return(0,o.wg)(),(0,o.iD)("div",ps,[(0,o._)("div",gs,(0,i.zw)(s.description),1),s.canBeDeleted?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"deleteBlock",onClick:t[0]||(t[0]=(...e)=>l.deleteBlock&&l.deleteBlock(...e))},"Удалить блок")):(0,o.kq)("",!0),0==s.textarea?(0,o.wy)(((0,o.wg)(),(0,o.iD)("input",{key:1,disabled:s.disabled,"onUpdate:modelValue":t[1]||(t[1]=e=>n.newValue=e),onInput:t[2]||(t[2]=(...e)=>l.changeValue&&l.changeValue(...e)),class:(0,i.C_)(["dataOfBlock",{fieldCanBeChanged:!s.disabled,emptyError:s.emptyError}])},null,42,fs)),[[a.nr,n.newValue]]):1==s.textarea?(0,o.wy)(((0,o.wg)(),(0,o.iD)("textarea",{key:2,class:(0,i.C_)(["dataOfBlock",{fieldCanBeChanged:!s.disabled}]),"onUpdate:modelValue":t[3]||(t[3]=e=>n.newValue=e),onInput:t[4]||(t[4]=(...e)=>l.changeValue&&l.changeValue(...e)),disabled:s.disabled},null,42,vs)),[[a.nr,n.newValue]]):(0,o.kq)("",!0)])}var ks={data(){return{oldValue:"",newValue:""}},created(){"Number"==this.type?("number"==typeof this.modelValue?(this.newValue=this.modelValue,this.oldValue=this.modelValue):(this.newValue="",this.oldValue=""),this.$emit("update:modelValue",this.newValue)):this.newValue=this.modelValue},props:{description:String,type:String,modelValue:[String,Number],disabled:Boolean,textarea:Boolean,canBeDeleted:Boolean,index:Number,emptyError:Boolean,canBeEmpty:[Boolean,null]},watch:{modelValue(){this.newValue=this.modelValue,this.modelValue.length>0&&1==this.emptyError&&this.$emit("removeEmptyError")}},methods:{changeValue(e){let t=!1,s=e.target.value;s=s.replace(/\s+/g," ")," "==s&&(s=""),this.newValue=s,"Number"==this.type&&(s=s.replace(".",""),s=s.replace("-",""),s=s.replace(/ /g,""),"0"==s[0]&&(s=s.slice(1)),this.newValue=s,0==Number.isInteger(Number(s))&&(t=!0,this.newValue=this.oldValue)),0==t&&(this.oldValue=s,this.$emit("update:modelValue",s))},deleteBlock(){this.$emit("deleteBlock",this.index)}}};const ys=(0,I.Z)(ks,[["render",ws],["__scopeId","data-v-f7fe313a"]]);var bs=ys;async function Bs(e,t){console.log(e);const s=is().addRequest;let a=await q.post(`${t}Requests/create`,{...e});console.log(a),0==a.data.errorExist&&"requestWasCreated"==a.data.actionMessage&&(e.id=a.data.content.id,s(e),oe.push({path:`/siteList/${t}/requestsList/`,replace:!0}))}var qs={setup(){let e=It(),t=e.setNameOfPage,s=oe.currentRoute.value;const a=s.params.siteName;s.params.requestId;t(`Создание запроса для сайта ${a}`);let r=(0,o.Fl)((()=>e.analyzedSites));return{analyzedSites:r}},created(){console.log(this.$route.params.siteName);let e=this.analyzedSites.find((e=>this.$route.params.siteName==e.name));this.requestCharacteristics=e.requestCharacteristics.map((e=>({name:e.name,description:e.description,type:e.type,canBeEmpty:e.canBeEmpty,value:"",emptyError:!1})))},data(){return{requestCharacteristics:[],keyWordsArray:[]}},methods:{addKeyWord(){this.keyWordsArray.push({value:"",emptyError:!1})},deleteKeyWordBlock(e){console.log(e),this.keyWordsArray.splice(e,1)},removeEmptyError(e,t){console.log(this[t][e]),this[t][e]={...this[t][e],emptyError:!1}},checkForEmpty(e){let t=!1;for(let s=0;s<this[e].length;s++)0==this[e][s].value.length&&1!=this[e][s].canBeEmpty&&(this[e][s]={...this[e][s],emptyError:!0},t=!0);return t},addRequest(){let e=this.checkForEmpty("requestCharacteristics"),t=this.checkForEmpty("keyWordsArray");if(0==e&&0==t){let e={};this.requestCharacteristics.forEach((t=>{let s=t.value;"Number"==t.type&&(console.log(t.value),s=Number(t.value)),e[t.name]=s}));let t=this.keyWordsArray.map((e=>e.value));e.keywordsInObjectDescription=t,Bs(e,this.$route.params.siteName)}}},components:{contentBlock:bs}};const Es=(0,I.Z)(qs,[["render",hs],["__scopeId","data-v-0cfb1c88"]]);var Os=Es;const _s=e=>((0,o.dD)("data-v-836336b8"),e=e(),(0,o.Cn)(),e),Cs={class:"page"},Ds={key:0,class:"informationText"},Is={key:1,class:"content"},Ms={class:"custom-radio"},Ns=_s((()=>(0,o._)("span",null,"Отображать только непросмотренные товары",-1))),zs={class:"custom-radio"},xs=_s((()=>(0,o._)("span",null,"Отображать только просмотренные товары",-1)));function Ls(e,t,s,r,i,n){const l=(0,o.up)("router-link"),c=(0,o.up)("objectBlock"),u=(0,o.up)("observer");return(0,o.wg)(),(0,o.iD)("div",Cs,[(0,o.Wm)(l,{class:"specialButton siteListButton",to:"/siteList/"+this.$route.params.siteName+"/requestsList"},{default:(0,o.w5)((()=>[(0,o.Uk)("Обратно к списку запросов")])),_:1},8,["to"]),0==i.objectsList.length?((0,o.wg)(),(0,o.iD)("div",Ds,"Товаров по этому запросу нет")):((0,o.wg)(),(0,o.iD)("div",Is,[(0,o._)("label",Ms,[(0,o.wy)((0,o._)("input",{type:"radio",name:"color","onUpdate:modelValue":t[0]||(t[0]=e=>i.viewedMode=e),value:!1},null,512),[[a.G2,i.viewedMode]]),Ns]),(0,o._)("label",zs,[(0,o.wy)((0,o._)("input",{type:"radio",name:"color","onUpdate:modelValue":t[1]||(t[1]=e=>i.viewedMode=e),value:!0},null,512),[[a.G2,i.viewedMode]]),xs]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.viewedObjectsList,(e=>((0,o.wg)(),(0,o.j4)(c,{key:e.id,onDeleteObject:n.deleteObjectByIndex,onUpdateViewed:n.updateViewedByIndex,objectData:e,objectId:e.id},null,8,["onDeleteObject","onUpdateViewed","objectData","objectId"])))),128)),(0,o.Wm)(u,{onIntersect:n.getObjectsList},null,8,["onIntersect"])]))])}const Ss={class:"objectBlock"},Ts={class:"descriptionOfData"},Ps={key:0,class:"descriptionOfData"},js={class:"descriptionOfData"},Vs={class:"descriptionOfData"},As={class:"descriptionOfData"},Rs={key:1,class:"descriptionOfData"},$s={key:2,class:"descriptionOfData"};function Ws(e,t,s,a,r,n){return(0,o.wg)(),(0,o.iD)("div",Ss,[(0,o._)("div",Ts,"№ ID: "+(0,i.zw)(s.objectData.id),1),null!=s.objectData.name?((0,o.wg)(),(0,o.iD)("div",Ps,"Название: "+(0,i.zw)(s.objectData.name),1)):(0,o.kq)("",!0),(0,o._)("div",js,"Просмотрен: "+(0,i.zw)(s.objectData.viewed),1),(0,o._)("div",Vs,"Цена: "+(0,i.zw)(s.objectData.price),1),(0,o._)("div",As,"Описание: "+(0,i.zw)(s.objectData.description),1),null!=n.creationTime?((0,o.wg)(),(0,o.iD)("div",Rs,"Время выкладывания: "+(0,i.zw)(n.creationTime),1)):(0,o.kq)("",!0),null!=n.creationTime?((0,o.wg)(),(0,o.iD)("div",$s,"Время обнаружения: "+(0,i.zw)(n.detectionTime),1)):(0,o.kq)("",!0),(0,o._)("div",{class:"ActionButton",onClick:t[0]||(t[0]=(...e)=>n.goToSite&&n.goToSite(...e))},"Просмотреть на сайте"),1==s.objectData.viewed?((0,o.wg)(),(0,o.iD)("div",{key:3,class:"ActionButton",onClick:t[1]||(t[1]=e=>n.updateViewed({viewed:!1}))},"Отметить непросмотренным")):(0,o.kq)("",!0),0==s.objectData.viewed?((0,o.wg)(),(0,o.iD)("div",{key:4,class:"ActionButton",onClick:t[2]||(t[2]=e=>n.updateViewed({viewed:!0}))},"Отметить просмотренным")):(0,o.kq)("",!0),(0,o._)("div",{class:"ActionButton",onClick:t[3]||(t[3]=(...e)=>n.deleteObject&&n.deleteObject(...e))},"Удалить")])}var Us={data(){return{}},props:{objectData:Object,objectId:Number},computed:{creationTime(){return null!=this.objectData.creationTime?this.getDateFormat(this.objectData.creationTime):null},detectionTime(){return null!=this.objectData.detectionTime?this.getDateFormat(this.objectData.detectionTime):null}},methods:{getDateFormat(e){var t=new Date(e),s=t.getDate(),a=t.getMonth();a+=1,a<10&&(a="0"+a);var o=t.getFullYear(),r=`${s}.${a}.${o}`;return console.log(r),r},updateViewed(e){this.$emit("updateViewed",{objectId:this.objectId,viewed:e.viewed})},deleteObject(){this.$emit("deleteObject",this.objectId)},goToSite(){"FunPay"==this.$route.params.siteName?window.open(`https://funpay.com/lots/offer?id=${this.objectData.idOnSite}`).focus():"Avito"==this.$route.params.siteName&&window.open(`https://www.avito.ru${this.objectData.linkOnSite}`).focus()}}};const Fs=(0,I.Z)(Us,[["render",Ws],["__scopeId","data-v-6eaa4282"]]);var Zs=Fs;const Ks={class:"observer"};function Hs(e,t,s,a,r,i){return(0,o.wg)(),(0,o.iD)("div",Ks)}var Ys={data(){return{observer:null}},mounted(){this.observer=new IntersectionObserver((([e])=>{e&&e.isIntersecting&&this.$emit("intersect")})),this.observer.observe(this.$el)},destroyed(){this.observer.disconnect()}};const Js=(0,I.Z)(Ys,[["render",Hs]]);var Qs=Js;async function Gs(e,t,s,a){is().setRequestsList;let o=await q.get(`${e}Objects/${t}/getAll?page=${s}&size=${a}`);return console.log(o),o}async function Xs(e,t,s,a){let o=await q.put(`${e}Objects/${t}/update/`,{objectId:s,...a});return console.log(o),o}async function ea(e,t,s){let a=await q.delete(`${e}Objects/${t}/delete/${s}`);return console.log(a),a}var ta={async beforeRouteEnter(e,t){let s=e.params.siteName;const a=It(),r=(0,o.Fl)((()=>a.analyzedSites));if(-1==r.value.findIndex((t=>t.name==e.params.siteName)))oe.push({path:"/",repalce:!0});else{const t=is(),a=(0,o.Fl)((()=>t.requestsList));let r=e.params.requestId,i=!1;if(0==t.siteName.length||t.siteName.length>0&&s!=t.siteName){t.setRequestsList([]),t.setSiteName(s);let e=await ns(s);1==e.data.errorExist&&(i=!0)}0==i&&-1==a.value.findIndex((e=>e.id==r))&&(i=!0),1==i&&oe.push({path:`/siteList/${s}/requestsList`,repalce:!0})}},setup(){const e=It();let t=e.setNameOfPage,s=oe.currentRoute.value,a=(0,o.Fl)((()=>s.params.siteName)),r=(0,o.Fl)((()=>s.params.requestId));return t(`Товары запроса № ${r.value} на сайте ${a.value}`),{siteName:a,requestId:r}},data(){return{objectsList:[],currentPage:0,totalPages:1,totalObjects:0,limit:10,observer:null,viewedMode:!1}},created(){this.getObjectsList()},computed:{viewedObjectsList(){return console.log("Массив был изменен"),this.objectsList.filter((e=>e.viewed==this.viewedMode))}},methods:{async deleteObjectByIndex(e){let t=this.$route.params.siteName,s=this.$route.params.requestId,a=await ea(t,s,e);if("objectWasDeleted"==a.data.actionMessage){let t=this.objectsList.findIndex((t=>t.id==e));this.objectsList.splice(t,1)}},async updateViewedByIndex(e){let t=e.objectId,s=e.viewed,a=this.$route.params.siteName,o=this.$route.params.requestId,r=await Xs(a,o,t,{viewed:s});if("objectWasUpdated"==r.data.actionMessage){this.objectsList.findIndex((e=>e.id==t));this.objectsList=this.objectsList.map((e=>e.id==t?{...e,viewed:s}:{...e}))}},async getObjectsList(){if(0==this.currentPage){let{listOfObjects:e,totalObjects:t,totalPages:s}=(await Gs(this.siteName,this.requestId,0,this.limit)).data.content;this.currentPage=this.currentPage+1,this.totalObjects=t,this.totalPages=s,console.log(e),this.objectsList=e}else if(this.currentPage<this.totalPages){this.currentPage=this.currentPage+1;let{listOfObjects:e}=(await Gs(this.siteName,this.requestId,this.currentPage,this.limit)).data.content;this.objectsList.push(...e)}}},components:{objectBlock:Zs,observer:Qs}};const sa=(0,I.Z)(ta,[["render",Ls],["__scopeId","data-v-836336b8"]]);var aa=sa;const oa={class:"page"};function ra(e,t,s,a,r,i){const n=(0,o.up)("router-link"),l=(0,o.up)("contentBlock");return(0,o.wg)(),(0,o.iD)("div",oa,[(0,o.Wm)(n,{class:"specialButton siteListButton",to:"/siteList/"+this.$route.params.siteName+"/requestsList"},{default:(0,o.w5)((()=>[(0,o.Uk)("Обратно к списку запросов")])),_:1},8,["to"]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.requestCharacteristics,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{description:e.description,type:e.type,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,index:t,emptyError:e.emptyError,onRemoveEmptyError:e=>i.removeEmptyError(t,"requestCharacteristics")},null,8,["description","type","modelValue","onUpdate:modelValue","index","emptyError","onRemoveEmptyError"])))),256)),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(r.keyWordsArray,((e,t)=>((0,o.wg)(),(0,o.j4)(l,{description:"Ключевое словосочетание № "+(t+1),canBeDeleted:!0,modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,index:t,onDeleteBlock:i.deleteKeyWordBlock,emptyError:e.emptyError,onRemoveEmptyError:e=>i.removeEmptyError(t,"keyWordsArray")},null,8,["description","modelValue","onUpdate:modelValue","index","onDeleteBlock","emptyError","onRemoveEmptyError"])))),256)),(0,o._)("div",{class:"actionButton",onClick:t[0]||(t[0]=(...e)=>i.addKeyWord&&i.addKeyWord(...e))},"Добавить ключевое словосочетание"),(0,o._)("div",{class:"actionButton",onClick:t[1]||(t[1]=(...e)=>i.changeRequest&&i.changeRequest(...e))},"Обновить поисковый запрос"),(0,o._)("div",{class:"actionButton",onClick:t[2]||(t[2]=(...e)=>i.deleteRequest&&i.deleteRequest(...e))},"Удалить поисковый запрос")])}async function ia(e,t){console.log(e);const s=is().updateRequest;let a=await q.put(`${t}Requests/update`,{...e});console.log(a),0==a.data.errorExist&&"requestWasUpdated"==a.data.actionMessage&&(s(e),oe.push({path:`/siteList/${t}/requestsList/`,replace:!0}))}var na={async beforeRouteEnter(e,t){let s=e.params.siteName;const a=It(),r=(0,o.Fl)((()=>a.analyzedSites));if(-1==r.value.findIndex((t=>t.name==e.params.siteName)))oe.push({path:"/",repalce:!0});else{const t=is(),a=(0,o.Fl)((()=>t.requestsList));let r=e.params.requestId,i=!1;if(0==t.siteName.length||t.siteName.length>0&&s!=t.siteName){t.setRequestsList([]),t.setSiteName(s);let e=await ns(s);1==e.data.errorExist&&(i=!0)}0==i&&-1==a.value.findIndex((e=>e.id==r))&&(i=!0),1==i&&oe.push({path:`/siteList/${s}/requestsList`,repalce:!0})}},setup(){const e=It(),t=(0,o.Fl)((()=>e.analyzedSites)),s=is(),a=(0,o.Fl)((()=>s.requestsList));let r=e.setNameOfPage,i=oe.currentRoute.value;const n=i.params.siteName,l=i.params.requestId;return r(`Обновление запроса № ${l}  для сайта ${n}`),{requestsList:a,analyzedSites:t,requestsStore:s}},created(){this.requestId=Number(this.$route.params.requestId),this.siteName=this.$route.params.siteName;let e=this.requestsList.find((e=>e.id==this.requestId));this.keyWordsArray=e.keywordsInObjectDescription.map((e=>({value:e,emptyError:!1})));let t=this.analyzedSites.find((e=>this.$route.params.siteName==e.name));this.requestCharacteristics=t.requestCharacteristics.map((t=>({name:t.name,description:t.description,type:t.type,canBeEmpty:t.canBeEmpty,value:e[t.name],emptyError:!1})))},data(){return{requestId:"",siteName:"",requestCharacteristics:[],keyWordsArray:[]}},methods:{addKeyWord(){this.keyWordsArray.push({value:"",emptyError:!1})},deleteKeyWordBlock(e){console.log(e),this.keyWordsArray.splice(e,1)},removeEmptyError(e,t){console.log(this[t][e]),this[t][e]={...this[t][e],emptyError:!1}},checkForEmpty(e){let t=!1;for(let s=0;s<this[e].length;s++)console.log(this[e][s].canBeEmpty),0==this[e][s].value.length&&1!=this[e][s].canBeEmpty&&(this[e][s]={...this[e][s],emptyError:!0},t=!0);return t},changeRequest(){let e=this.checkForEmpty("requestCharacteristics"),t=this.checkForEmpty("keyWordsArray");if(0==e&&0==t){let e={};e.id=this.requestId,this.requestCharacteristics.forEach((t=>{let s=t.value;"Number"==t.type&&(console.log(t.value),s=Number(t.value)),e[t.name]=s}));let t=this.keyWordsArray.map((e=>e.value));e.keywordsInObjectDescription=t,ia(e,this.siteName)}},async deleteRequest(){let e=await ls(this.siteName,this.requestId);0==e.data.errorExist&&this.$router.push({path:`/siteList/${this.siteName}/requestsList/`,replace:!0})}},components:{contentBlock:bs}};const la=(0,I.Z)(na,[["render",ra],["__scopeId","data-v-5f871c4b"]]);var ca=la;const ua=[{path:"/siteList",component:Ht,meta:{nameOfPage:"Список сайтов",requiredAuthStatus:!0}},{path:"/siteList/:siteName/requestsList",component:ds,meta:{nameOfPage:"",requiredAuthStatus:!0}},{path:"/siteList/:siteName/createRequest",component:Os,meta:{nameOfPage:"",requiredAuthStatus:!0}},{path:"/siteList/:siteName/updateRequest/:requestId",component:ca,meta:{nameOfPage:"",requiredAuthStatus:!0}},{path:"/siteList/:siteName/:requestId/objectsList",component:aa,meta:{nameOfPage:"",requiredAuthStatus:!0}}];var da={routes:ua};const ma=e=>{e.forEach((e=>{null!=e.routes&&e.routes.forEach((e=>{oe.addRoute(e)}))}))},ha=(0,a.ri)($t),pa=(0,f.WB)();pa.use((0,Wt.Z)(oe)),ha.use(pa),ma([Dt,da,ee]),console.log("Загрузка данных приложения"),Vt(),ha.use(oe),ha.mount("#app")},4184:function(e,t,s){var a={"./backArrow.svg":7878,"./commonStyles.css":1715,"./logo.png":1678,"./menuBar.svg":1123,"./reset.css":7382};function o(e){var t=r(e);return s(t)}function r(e){if(!s.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}o.keys=function(){return Object.keys(a)},o.resolve=r,e.exports=o,o.id=4184},7878:function(e,t,s){"use strict";e.exports=s.p+"img/backArrow.8ff50f68.svg"},1123:function(e,t,s){"use strict";e.exports=s.p+"img/menuBar.078332b6.svg"},1678:function(e,t,s){"use strict";e.exports=s.p+"img/logo.d66736ee.png"}},t={};function s(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,s),r.exports}s.m=e,function(){var e=[];s.O=function(t,a,o,r){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],r=e[u][2];for(var n=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((function(e){return s.O[e](a[l])}))?a.splice(l--,1):(n=!1,r<i&&(i=r));if(n){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,o,r]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){s.p="/"}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,i=a[0],n=a[1],l=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in n)s.o(n,o)&&(s.m[o]=n[o]);if(l)var u=l(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(u)},a=self["webpackChunkhstejob"]=self["webpackChunkhstejob"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(6205)}));a=s.O(a)})();
//# sourceMappingURL=app.cfa8ea43.js.map